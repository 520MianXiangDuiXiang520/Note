```pyimport sysimport turtlefrom time import sleepimport randomclass NoParkingSpacesException(Exception):    passclass User:    def __init__(self, start_time, end_time):        self.start_time = start_time        self.end_time = end_timeclass Park:    def __init__(self):        # åœè½¦ä½å¯ç”¨æ—¶é—´åˆ—è¡¨ï¼Œä¸€å¼€å§‹éƒ½æ˜¯ï¼ˆ0,24ï¼?        self.useful_time_list = [(0, 24)]class SharedParkingSpaceMS:    """    1. è®¡ç®—å¹¶ç´§å‡‘æˆ·ä¸»çš„ä½¿ç”¨æ—¶é—´ï¼Œä»¥å‡å°‘ç¢ç‰‡ï¼Œå¾—åˆ°æ²¡æœ‰å¤–ç•Œè½¦è¾†åŠ å…¥æ—¶çš„å¯ç”¨æ—¶é—´é˜Ÿåˆ?    2. æœ‰å¤–ç•Œè½¦è¾†ç”³è¯·åŠ å…¥æ—¶ï¼Œåˆ¤æ–­æœ‰æ²¡æœ‰èƒ½æ»¡è¶³è¯¥è½¦è¾†ä½¿ç”¨æ—¶é—´çš„åœè½¦ä½    3. å¦‚æœæœ‰ï¼Œå…è®¸åœè½¦å¹¶ä¿®æ”¹å¯ç”¨æ—¶é—´é˜Ÿåˆ?    """    def __init__(self):        # å‡è®¾æœ‰äº”ä½ä¸šä¸»ï¼Œäº”ä¸ªè½¦ä½        self.user_list = [User(7, 12),                          User(8, 19),                          User(12, 16),                          User(5, 7),                          User(10, 15)]        self.sc_list = []        self.parking_list = [Park() for i in range(len(self.user_list))]    def draw(self):        """        ç”»æ ¼å­ï¼Œxè½´æ–¹å‘ä¸ºæ—¶é—´ï¼?hï¼‰ï¼Œyè½´æ–¹å‘ä¸ºè½¦ä½å?        :return:        """        turtle.screensize(1000, 800, "#e9e7e5")        turtle.pensize(3)        turtle.pencolor('#8f8f8f')        turtle.speed(10)        turtle.hideturtle()        turtle.delay(delay=0)        s = [int(300 - (600 / (len(self.user_list))) * y) for y in range(len(self.user_list) + 1)]        print(s)        for y in s:            turtle.penup()            turtle.goto(-400, y)            turtle.right(90)            turtle.pendown()            turtle.goto(400, y)        t = [int(-400 + (800 / 24) * y) for y in range(25)]        for x in t:            turtle.penup()            turtle.goto(x, 300)            turtle.right(90)            turtle.pendown()            turtle.goto(x, -300)    @staticmethod    def draw_useful(park_index, start_time, end_time, flag):        """        å°†åœè½¦åœºçš„å ç”¨æƒ…å†µç”»å‡ºæ¥        :param park_index: è½¦ä½å?        :param start_time: åœè½¦å¼€å§‹æ—¶é—?        :param end_time: ç¦»å¼€æ—¶é—´        :param flag: 1 ä¸ºæˆ·ä¸»å ç”¨çš„æ—¶é—´ï¼Œç”¨çº¢è‰²æ ‡è®°ï¼?ä¸ºå¤–ç•Œè½¦è¾†å ç”¨çš„æ—¶é—´        """        color = ['#8f8f8f', '#edd6b0', '#55ecd0', '#ed8211', '#5f9928', '#2559d3', '#94d8cb', '#5b5237']        user_color = ['#ed3c3c', '#77061c', '#f07d85', '#e33a1c', '#b61f04']        if flag == 2:            col = random.choice(color)        if flag == 1:            col = random.choice(user_color)        turtle.pencolor(col)        turtle.fillcolor(col)        turtle.pensize(1)        turtle.begin_fill()        turtle.penup()        turtle.goto(-400 + (800 / 24) * start_time, 280 - (120 * park_index))        turtle.pendown()        turtle.goto(-400 + (800 / 24) * end_time, 280 - (120 * park_index))        turtle.goto(-400 + (800 / 24) * end_time, 280 - (120 * park_index) - 80)        turtle.goto(-400 + (800 / 24) * start_time, 280 - (120 * park_index) - 80)        turtle.goto(-400 + (800 / 24) * start_time, 280 - (120 * park_index))        turtle.end_fill()    @staticmethod    def draw_no_useful():        """        æ²¡æœ‰åœè½¦ä½æ—¶ï¼Œæ˜¾å¼æ–‡å­?        :return:        """        turtle.penup()        turtle.goto(-100, 0)        turtle.pencolor('red')        turtle.write("æ²¡ç”¨å¯ç”¨è½¦ä½", font=('Arial', 40, 'normal'))        # sleep(0.5)        turtle.undo()    def get_useful_list(self, user: User):        """        åˆ¤æ–­æŸä¸ªæ–°æ¥çš„ç”¨æˆ·èƒ½ä¸èƒ½åœè½¦, å¦‚æœæ²¡æœ‰è½¦ä½ï¼ŒæŠ›å‡?NoParkingSpacesException å¼‚å¸¸        :param user: User(start_time, end_time)        :return: å¦‚æœæœ‰è½¦ä½ï¼Œè¿”å›è½¦ä½å?        """        for park_index, park in enumerate(self.parking_list):            for index, useful in enumerate(park.useful_time_list):                if (user.start_time >= useful[0]) and (user.end_time <= useful[1]):                    park.useful_time_list.pop(index)                    if useful[0] < user.start_time:                        park.useful_time_list.append((useful[0], user.start_time))                    if user.end_time < useful[1]:                        park.useful_time_list.append((user.end_time, useful[1]))                    return park_index        raise NoParkingSpacesException    def request(self, new_user: User):        """        è¯·æ±‚ä¸€ä¸ªè½¦ä½?        :param new_user: User(start_time, end_time)        :return:         """        print(f'{new_user.start_time}:00 , ä¸€ä¸ªå¤–æ¥è½¦è¾†è¯·æ±‚åœè½¦ä½ï¼Œéœ€è¦ä½¿ç”¨ï¼š{new_user.end_time - new_user.start_time} å°æ—¶')        try:            park_index = self.get_useful_list(new_user)            print(f'èƒ½æ»¡è¶³è¯·æ±‚ï¼Œå…è®¸åœè½¦,åœæ”¾åœ?{park_index} å·è½¦ä½?)            self.draw_useful(park_index, new_user.start_time, new_user.end_time, 2)        except NoParkingSpacesException:            sys.stderr.write("ä¸èƒ½æ»¡è¶³è¯·æ±‚ï¼ï¼ï¼\n")            self.draw_no_useful()        self.sc_list.append(new_user)    def run(self):        self.draw()        # å…ˆå°†æˆ·ä¸»çš„å ç”¨æ—¶é—´åŠ å…¥å¯ç”¨é˜Ÿåˆ—ï¼Œä¿è¯æˆ·ä¸»æœ‰å¯ç”¨çš„è½¦ä½        for i in self.user_list + self.sc_list:            park_index = self.get_useful_list(i)            self.draw_useful(park_index, i.start_time, i.end_time, 1)        sleep(1)        # éšæœºäº§ç”Ÿç¤¾ä¼šè½¦è¾†        for i in range(30):            start = random.randint(0, 24)            end = random.randint(0, 24)            if start < end:                user = User(start, end)                self.request(user)                sleep(2)if __name__ == '__main__':    SharedParkingSpaceMS().run()    turtle.done()```![](./å®éªŒ2_1.png)![](./å®éªŒ2.png)