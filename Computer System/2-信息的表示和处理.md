# 2.信息的表示和处理





## 0x04 浮点数

 十进制的小数时怎么表示的？

```md
123.456
```

以小数点为分割，小数点左边为 10 的正幂，右边为 10 的负幂：
$$
123.456 = 3\times10^0 + 2\times10^1 + 1 \times 10^2 + 4\times10^{-1} + 5\times10^{-2} + 6\times10^{-3} =3 + 20 + 100 + \frac{4} {10} + \frac{5} {100} + \frac{6} {1000}
$$
推广到 b 进制
$$
b_{m}b_{m-1} b_{m-2} \cdots b_{0}.b_{-1}b_{-2}\cdots b_{-n} = b_{m}\times b^m + b_{m-1} \times b^{m-1} \cdots + b_{0} + \frac{b_{-1}}{b^1} + \frac{b_{-2}}{b^2} + \cdots + \frac{b_{-n}}{b^n}
$$

### IEEE 浮点表示

$$
V = (-1)^s \times M \times 2^E
$$

* `s`: 表示符号位
* `M`: 尾数，是一个二进制小数
* $2^E$ : 对浮点数加权，可能是负数

IEEE 表示中，一个浮点数二进制串由三部分组成：

* 符号位 s
* 阶码字段 exp
* x小数字段 frac

在 c 语言  float 和 double 中，他们的长度分别是：

|        | s    | exp (e) | frac |
| ------ | ---- | ------- | ---- |
| flloat | 1    | 8       | 23   |
| double | 1    | 11      | 52   |

#### 规格化的值

 当 exp 不全是 0 或全是 1 时，被称为规格化的，此时 E 被规定为：
$$
E = e - Bias
$$
其中 bias是一个偏置值，值为
$$
Bias=2^{k-1} -1
$$
k 是阶码字段的长度，如 float 中为 8，则 Bias = 127

以 float 为例，exp 所能表示的值 e 的范围是 `[1, 254]` 所以 E 的范围就是 `[-126, 127]`

规格化的 frac 被描述为一个小数值，小数点在 frac 最高位的左边，其值表示为 f, f 是一个在 `[0, 1)` 区间内的数， 而规格化的 M 被规定为 `1 + f`

> 假设使用 8 位存储一个浮点数，exp 占 4 位（k），frac 占 3 位
>
> 此时有一个二进制串 0 0110 110：
>
> 可以求得 $Bias=2^{k-1}-1=2^3-1=7$
>
> $E=e-Bias=(0110)_2 - 7 = 6-7=-1$
>
> $M=1+f=1+(0.110)_2=1+\frac{6}{8}=\frac{14}{8}$
>
> 可以计算得到 $V = (-1)^0 \times \frac{14}{8} \times \frac{1}{2}=\frac{7}{8}=0.875$

#### 非规格化值

$$
E = 1-Bias
$$

$$
M=f
$$

