# JAVA 一切皆对象

JAVA一切都被视为对象，但操纵的标识符实际上是对象的一个 **“引用”**

```java
// s是String对象的一个引用
String s
```

创建引用之后要与一个对象相关联。

```java
String s = new String("java");
String s = "Java";
```

## 内存分配

Java运行时，有五个地方可以存储数据

1. 寄存器：位于CPU内部，速度最快，容量有限，需要程序动态分配，不能人为控制
2. 栈：位于RAM（随机存储器），存放对象引用
3. 堆：位于RAM，存放对象，分配和清理用时比栈多，但栈移动堆栈指针需要知道对象确切的生命周期，影响灵活性
4. 常量存储：直接放在代码中
5. 非RAM存储

### 特例——基本数据类型

基本数据类型不使用 new 创建对象，创建基本数据类型不是创建引用，而是创建了一个“自动”变量，这个变量直接存储 **值** 存放在 **栈空间**

|基本数据类型|大小|MAX|MIN|包装器类型|
|-----------|---|----|---|---------|
|boolean|---|---|----|Booleaan|
|char|16bit|Unicode 0|Unicode 2**16 - 1|Character|
|byte|8bits|-128|+127|Byte|
|short|16 bits|-(2 ** 15)|+ (2 ** 15) -1|Short|
|int|32 bits|- (2 ** 32) | +(2 ** 31) - 1|Integer|
|long|64 bits|-(2 ** 63) |+(2 ** 63) - 1|Long|
|float|32 bits|IEEE754|IEEE754|Float|
|double|64 bits|IEEE754|IEEE754|Double|
|void|----|-----|-----|Void|

* 可以使用包装器类型在 **堆** 中创建一个非基本对象

BigInteger: 支持任意精度整数
BigDecimal；支持任意精度定点数

## 作用域

Java中存在块作用域，使用`{}`分割块，块作用域中定义的变量不能被外界访问，但块中不能定义全局已有的变量

```java
{
    int j = 0;
    {
        // 不合法，块中不能定义全局已有变量
        int j = 1;
    }
}
```

```java
{
    int j = 0;
}
// 不合法，不能访问到块作用域中的量
System.out.println(j);
```

```java
// 合法
{
    int c = 1;
    System.out.println(c);
}
{
    int c = 0;
    System.out.println(c);
}
```

使用new创建对象时，它可以存活到作用域之外

```java
void func(){
    String s = new String("123");
}
// 函数结束后，引用s消失，但s指向的对象依旧占据着内存，并且无法调用它，只能等待被GC回收
```

## 使用类创建新对象

类中成员的默认值

类中基本数据类型的成员都会有一个默认值

|数据成员|默认值|
|--------|-----|
|boolean|false|
|char|null|
|byte|(byte)0|
|int|0|
|long|0L|
|float|0.0f|
|double|0.0d|

### 方法，参数，返回值

1. 方法依赖对象而存在，必须在类中定义，也只能通过对象调用（static方法除外）
2. 给方法传递参数时传递的是引用（基本数据类型除外）

### static关键字

将方法或属性声明为静态，静态方法不依赖于对象，不创建任何对象就可以调用它，而static属性则可以使类的多个实例保留一份属性。
