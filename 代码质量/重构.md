# 《重构——改善既有代码的设计》读书笔记

> 代码首先是给人看的，其次是给机器运行的！

## 重构的原则

## 坏代码的味道

## 重构技巧

### 基本技巧

**1. 良好的命名**：不管是函数还是变量，其名字都应该准确的表示其作用，不应该有歧义

**2. 重新封装函数**：一个函数只干一件确定的事，并能用函数名清楚地叙述其做的事
* 如果有一个函数又臭又长，可以尝试将其中独立的功能封装成一个函数，对调用者屏蔽掉其中的细节。
* 如果一个功能在这里实现了一半，那里又实现了一半，如果可以，尽量将它们统一在一起。

**3. 简化表达式**： 过于复杂的表达式非常影响阅读，尝试使用括号分割或引入局部变量说明。

**4. 合适的参数列表**：函数参数列表不是越长越好，可以改为属性的可以使用属性，参数名和返回值的名字也同样重要。

**5. 封装变量**：将对数据项的修改封装为函数，方便控制数据读取和修改

**6. 引入参数对象**： 经常一起出现的变量可以尝试将它们分装成结构体

**7. 函数封装为类**：如果一组函数经常和一组数据出现，尝试将它们分装成类

**8. 函数组合成变换**：使用数据转换函数 Transform 替代 函数封装为类 中的类

**9. 拆分阶段**：将一大段代码拆分为多个顺序执行的阶段


 

```go
func doSomething() {
    // init
    article := NewArticle()
    article.Name = ""
    article.Tag = ""

    // insert to db

}
```